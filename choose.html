<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kiosk Touch</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Choose Item</h1>
<div id="buttons"></div>

<script>
async function loadItems(){
  try{
    const res = await fetch('/items.json');
    const data = await res.json();
    const div = document.getElementById('buttons');
    div.innerHTML = '';
    data.items.forEach(item=>{
      const btn = document.createElement('button');
      btn.className='touch-btn';
      btn.textContent=item;
      btn.onclick=()=>sendSelection(item);
      div.appendChild(btn);
    });
  }catch(e){ console.error(e); }
}

// Send selection to main site
async function sendSelection(item){
  try{
    await fetch('/selected',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({selected:item})
    });
    alert(`Sent: ${item}`);
  }catch(e){ console.error(e); }
}

loadItems();
setInterval(loadItems,5000); // refresh every 5s
</script>
</body>
</html>
